<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mini GTA Game</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: #222;
      font-family: Arial, sans-serif;
    }

    #gameCanvas {
      display: block;
      margin: auto;
      background: #3b3b3b;
      border: 4px solid #111;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas" width="800" height="600"></canvas>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    // Player setup
    const player = {
      x: 400,
      y: 300,
      size: 30,
      speed: 4,
      color: "red",
      dx: 0,
      dy: 0
    };

    // Bullets
    const bullets = [];

    // Buildings (obstacles)
    const buildings = [
      {x: 100, y: 100, w: 150, h: 100},
      {x: 500, y: 200, w: 200, h: 150},
      {x: 300, y: 400, w: 100, h: 150}
    ];

    // Controls
    const keys = {};
    document.addEventListener("keydown", (e) => {
      keys[e.key] = true;
      if (e.key === " ") {
        shoot();
      }
    });
    document.addEventListener("keyup", (e) => {
      keys[e.key] = false;
    });

    function shoot() {
      bullets.push({
        x: player.x + player.size / 2 - 5,
        y: player.y + player.size / 2 - 5,
        w: 10,
        h: 10,
        dx: player.dx * 2 || 6, // shoot forward
        dy: player.dy * 2
      });
    }

    function movePlayer() {
      player.dx = 0;
      player.dy = 0;

      if (keys["ArrowUp"]) player.dy = -player.speed;
      if (keys["ArrowDown"]) player.dy = player.speed;
      if (keys["ArrowLeft"]) player.dx = -player.speed;
      if (keys["ArrowRight"]) player.dx = player.speed;

      player.x += player.dx;
      player.y += player.dy;

      // Collision with walls
      buildings.forEach(b => {
        if (player.x < b.x + b.w &&
            player.x + player.size > b.x &&
            player.y < b.y + b.h &&
            player.y + player.size > b.y) {
          // Reset movement if collides
          player.x -= player.dx;
          player.y -= player.dy;
        }
      });

      // Keep inside canvas
      if (player.x < 0) player.x = 0;
      if (player.y < 0) player.y = 0;
      if (player.x + player.size > canvas.width) player.x = canvas.width - player.size;
      if (player.y + player.size > canvas.height) player.y = canvas.height - player.size;
    }

    function moveBullets() {
      bullets.forEach((b, i) => {
        b.x += b.dx;
        b.y += b.dy;

        // Remove if off screen
        if (b.x < 0 || b.x > canvas.width || b.y < 0 || b.y > canvas.height) {
          bullets.splice(i, 1);
        }
      });
    }

    function drawPlayer() {
      ctx.fillStyle = player.color;
      ctx.fillRect(player.x, player.y, player.size, player.size);
    }

    function drawBuildings() {
      ctx.fillStyle = "#555";
      buildings.forEach(b => {
        ctx.fillRect(b.x, b.y, b.w, b.h);
      });
    }

    function drawBullets() {
      ctx.fillStyle = "yellow";
      bullets.forEach(b => {
        ctx.fillRect(b.x, b.y, b.w, b.h);
      });
    }

    function update() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawBuildings();
      movePlayer();
      moveBullets();
      drawPlayer();
      drawBullets();

      requestAnimationFrame(update);
    }

    update();
  </script>
</body>
</html>
